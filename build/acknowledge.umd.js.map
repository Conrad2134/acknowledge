{"version":3,"file":"acknowledge.umd.js","sources":["../src/index.js"],"sourcesContent":["/**\n * Propmpts the user to acknowledge a modal.\n * @param {String|DOMElement|jQuery} target The modal to target\n * @param {Object} options Options to pass to acknowledge\n * @returns {Promise} A promise that resolves upon acknowledgement, rejects upon dismissal\n */\nexport default (target, { persist = false, scope = document, keepOpen = false, before = () => {} } = {}) =>\n\tnew Promise((resolve, reject) => {\n\t\tconst $modal = $(scope).find(target);\n\n\t\tif (!$modal.length) {\n\t\t\treturn reject(`Modal not found: ${target}`);\n\t\t}\n\n\t\tif (persist && $modal.data(\"acknowledged\")) {\n\t\t\treturn resolve();\n\t\t} else if (!persist && $modal.data(\"acknowledged\")) {\n\t\t\t$modal.removeData(\"acknowledged\");\n\t\t}\n\n\t\t$modal.one(\"hidden.bs.modal\", () => {\n\t\t\treject(`Acknowledgement dismissed: ${target}`);\n\t\t});\n\n\t\t$modal.one(\"click\", \"[data-acknowledge]\", async () => {\n\t\t\ttry {\n\t\t\t\tconst b = before();\n\n\t\t\t\tb && b.then && (await b);\n\t\t\t} catch (ex) {\n\t\t\t\treject(`Acknowledgement \\`before\\` rejected. Skipping acknowledgement.`);\n\t\t\t}\n\n\t\t\tif (persist) {\n\t\t\t\t$modal.data(\"acknowledged\", true);\n\t\t\t}\n\n\t\t\t$modal.off(\"hidden.bs.modal\");\n\n\t\t\tif (keepOpen) {\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\t$modal.one(\"hidden.bs.modal\", () => resolve()).modal(\"hide\");\n\t\t\t}\n\t\t});\n\n\t\t$modal.modal(\"show\");\n\t});\n"],"names":["target","ref","document","Promise","resolve","reject","const","$modal","$","scope","find","length","persist","data","removeData","one","off","keepOpen","modal","ex","b","before","then","$await_4"],"mappings":"8LAMA,SAAgBA,EAAQC,sDAAY,gCAAeC,2CAAqB,sDACvE,IAAIC,iBAASC,EAASC,GACrBC,IAAMC,EAASC,EAAEC,GAAOC,KAAKV,GAE7B,OAAKO,EAAOI,OAIRC,GAAWL,EAAOM,KAAK,gBACnBT,MACIQ,GAAWL,EAAOM,KAAK,iBAClCN,EAAOO,WAAW,gBAGnBP,EAAOQ,IAAI,6BACVV,gCAAqCL,KAGtCO,EAAOQ,IAAI,QAAS,+FASfH,GACHL,EAAOM,KAAK,gBAAgB,GAG7BN,EAAOS,IAAI,mBAEPC,EACHb,IAEAG,EAAOQ,IAAI,oCAAyBX,MAAWc,MAAM,yDAb7CC,cACRd,EAAO,sGALR,IAGC,OAFMe,EAAIC,yCAEVD,GAAKA,EAAEE,KAAS,OAAMF,EAANE,8BAAAC,8GAAhBD,2EACQH,KAAAA,qBAiBVZ,EAAOW,MAAM,SAnCLb,sBAA2BL"}